<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>basic</title>
	<script type="text/javascript" src="../lib/seqdiag/parser.js" ></script>
	<script type="text/javascript" src="../lib/seqdiag.js" ></script>
</head>
<body style="background-color: #999999;">
	<script type="text/x-seqdiag" id="seqdiag-text">
		seqdiag {
			A;
			B;
			C;

			A -> B [label =  "start session(A to B)"];
			B -> C [label = "B to C"];
			C --> B [label = "C to B"];
			B --> A [label = " return to A"];
		}
	</script>

	<div id="seqdiag"></div>

	<script type="text/javascript">
		window.onload = function() {
			var target = document.getElementById('seqdiag-text');
			var inplace = document.getElementById('seqdiag');

			var AST = SeqdiagParser.parse(target.innerText);
			var diagram = Seqdiag.DiagramBuilder.build(AST);
			var svgns = "http://www.w3.org/2000/svg";
			var svg = document.createElementNS(svgns, "svg");
			var drawer = new Seqdiag.Drawer.SVG(diagram, svg, document);
			drawer.draw();

			var desc = document.createElementNS(svgns, "desc");
			desc.textContent = target.innerText;
			svg.appendChild(desc);
			var figure = document.createElement("figure");
			figure.appendChild(svg);
			inplace.appendChild(figure);
		};
	</script>
</body>
</html>
