<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Seqdiag.js by walf443</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
	<script src="javascripts/seqdiag/parser.js"></script>
	<script src="javascripts/seqdiag.js?v0.0.2"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/walf443/seqdiag.js">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/walf443/seqdiag.js/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/walf443/seqdiag.js/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Seqdiag.js</h1>
          <p>seqdiag on browser.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/walf443">walf443</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h2>Seqdiag.js</h2>

<p>sequence diagram on javascript from simple text format.</p>

<h2>Example</h2>

<div>
	<script type="text/x-seqdiag" class="seqdiag" data-target-id="figure1">
			seqdiag {
				A[label = "webapp"];
				B[label = "DB"];

				A -> B[label = "sql"];
				B -> A [label = "result"];
			}
	</script>

	<figure id="figure1"></figure>
</div>

<pre><code>&lt;!doctype html&gt;
&lt;head&gt;
    &lt;script type="text/javascript" src="../lib/seqdiag/parser.js" &gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="../lib/seqdiag.js" &gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;figure id="diag"&gt;&lt;/figure&gt;
    &lt;script type="text/x-seqdiag" id="seqdiag-text"&gt;
        seqdiag {
            A [label = "webapp"];
            B [label = "DB"];

            A -&gt; B[label = "sql"];
            B -&gt; A [label = "result"];
        }
    &lt;/script&gt;
    &lt;script type="text/javascript"&gt;
        window.onload = function() {
            var taget = document.getElementById('seqdiag-text');
            var ast = SeqdiagParser.parse(target.innerText);
            var diagram = Seqdiag.Builder.build(ast);
            var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", "1024");
            svg.setAttribute("width", "600");
            var drawer = new Seqdiag.Drawer.SVG(diagram, svg, document);
            drawer.draw();
            var figure = document.getElementById('diag');
            figure.appendChild(svg);
        };
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<section>
	<h2>Try Seqdiag.js</h2>

	<div class="form">
		<div><textarea id="seqdiag-preview" style="width: 600px; height: 300px;">
seqdiag {
	A;
	B;
	C;

	A -&gt; B [label =  "start session(A to B)"];
	B -&gt; C [label = "B to C"];
	C --&gt; B [label = "C to B"];
	B --&gt; A [label = " return to A"];
}
</textarea></div>
		<input id="submit-preview" type="submit" value="preview">
	</div>
</section>

<section>
	<h2>Preview</h2>
	<div id="seqdiag"></div>
</section>

<h2>SEE ALSO</h2>

<ul>
<li>examples/try.html</li>
<li>seqdiag - <a href="http://blockdiag.com/en/seqdiag/">http://blockdiag.com/en/seqdiag/</a>
</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
	<script type="text/javascript">
		window.onload = function() {
			$('.seqdiag').each(function() {
				var target = $(this);
				var ast = SeqdiagParser.parse(target.text());
				var diagram = Seqdiag.DiagramBuilder.build(ast);
				var svgns = "http://www.w3.org/2000/svg";
				var svg = document.createElementNS(svgns, "svg");
				svg.setAttribute("width", "500");
				svg.setAttribute("height", "250");
				svg.setAttribute("style", "background-color: #cceeff; color: #333333");
				var drawer = new Seqdiag.Drawer.SVG(diagram, svg, document);
				drawer.draw();
				var target_id = target.data('target-id');
				console.log(svg);
				$('#' + target_id).html(svg);
			});
			var previewButton = document.getElementById("submit-preview");
			var doPreview = function() {
				var target = document.getElementById('seqdiag-preview');
				var inplace = document.getElementById('seqdiag');

				var AST = SeqdiagParser.parse(target.value);
				var diagram = Seqdiag.DiagramBuilder.build(AST);
				var svgns = "http://www.w3.org/2000/svg";
				var svg = document.createElementNS(svgns, "svg");
				svg.setAttribute("width", "800");
				svg.setAttribute("height", "400");
				svg.setAttribute("style", "background-color: #cceeff; color: #333333");
				var drawer = new Seqdiag.Drawer.SVG(diagram, svg, document);
				drawer.draw();

				var desc = document.createElementNS(svgns, "desc");
				desc.textContent = target.innerText;
				svg.appendChild(desc);
				var figure = document.createElement("figure");
				figure.appendChild(svg);
				inplace.innerHTML = "";
				inplace.appendChild(figure);
			};
			previewButton.onclick = function() {
				doPreview();
			}
			doPreview();
		};
	</script>
  </body>
</html>
